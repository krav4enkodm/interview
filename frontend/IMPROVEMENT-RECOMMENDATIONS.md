# Frontend Improvement Recommendations

> Analysis of the Next.js 16 / React 19 frontend application.
> Severity: ðŸ”´ Critical | ðŸŸ  High | ðŸŸ¡ Medium | ðŸŸ¢ Low

## Summary Table

| # | Area | Issue | File(s) | Severity | Details |
|---|------|-------|---------|----------|---------|
| 1 | Config | `reactStrictMode` is set to `false` | `next.config.ts:4` | ðŸ”´ Critical | React Strict Mode catches bugs (unsafe lifecycles, unexpected side effects, legacy API usage). Disabling it in development hides real problems that surface in production. Set to `true`. |
| 2 | Error Handling | No React Error Boundaries | App-wide | ðŸ”´ Critical | A single component throw crashes the entire page with no recovery UI. Add `<ErrorBoundary>` at the layout level and around each page's data-dependent section. |
| 3 | Security | No authentication or authorization | All API routes | ðŸ”´ Critical | Every API endpoint (`/api/v1/*`) is publicly accessible with no auth middleware, session checks, or API-key validation. Any user can read all customer PII (names, emails, phones). |
| 4 | API | Unhandled Zod parse errors return 500 | `app/api/v1/*/[id]/route.ts` | ðŸŸ  High | Detail routes call `customerIdParamsSchema.parse()` directly. If the path param is malformed, Zod throws and Next.js returns a raw 500 error instead of a structured 400 response. Wrap in try/catch or use `.safeParse()`. |
| 5 | Scalability | No pagination on list endpoints | `app/api/v1/customers/route.ts`, `vehicles/route.ts`, `repair-orders/route.ts` | ðŸŸ  High | All list endpoints return the full dataset in a single response. As data grows, this causes slow responses, high memory usage, and poor UX. Add `?page=&limit=` query params. |
| 6 | UX | Repair order rows show `cursor-pointer` but are not clickable | `app/(internal)/repair-orders/page.tsx:38` | ðŸŸ  High | Rows have `cursor-pointer` CSS but no `onClick` handler or wrapping `<Link>`. Users see a pointer cursor but clicking does nothing. Either add navigation to a detail view or remove the cursor style. |
| 7 | SEO / Branding | Default "Create Next App" metadata | `app/layout.tsx:17-19` | ðŸŸ  High | The root layout still has the scaffolding title `"Create Next App"` and description `"Generated by create next app"`. This appears in browser tabs, search engines, and social shares. Update to match the TekShop brand. |
| 8 | Responsiveness | Sidebar has no mobile/responsive behavior | `components/Sidebar.tsx` | ðŸŸ  High | The sidebar is a fixed `w-60` panel. On mobile viewports, it consumes 240px of screen width with no collapse, hamburger menu, or off-canvas drawer. The internal layout is unusable on phones. |
| 9 | Accessibility | Missing ARIA landmarks and labels | `components/Sidebar.tsx`, table pages | ðŸŸ¡ Medium | The sidebar `<nav>` lacks `aria-label="Main navigation"`. Active links don't use `aria-current="page"`. Tables don't use `<caption>` for screen-reader context. The `<aside>` has no `aria-label`. |
| 10 | Data | Empty state not handled | All table pages | ðŸŸ¡ Medium | When API returns an empty array, the table body renders nothing â€” no "No records found" message. Users see an empty table with just headers and no feedback. |
| 11 | Accessibility | No skip-to-content link | `app/(internal)/layout.tsx` | ðŸŸ¡ Medium | Keyboard users must tab through all sidebar links before reaching main content. Add a visually-hidden "Skip to main content" link at the top of the page. |
| 12 | Code Quality | Duplicate navigation definitions | `components/Sidebar.tsx:9-30`, `lib/home-page-mocks.tsx:6-11` | ðŸŸ¡ Medium | Navigation items are defined in two separate locations with slightly different shapes. If a route changes, both must be updated independently. Extract a shared `NAV_ITEMS` constant. |
| 13 | API | Two identical OpenAPI routes | `app/api/openapi/route.ts`, `app/api/openapi.json/route.ts` | ðŸŸ¡ Medium | Both routes serve the exact same `openApiSpec` JSON. This is confusing and creates maintenance burden. Keep one canonical route and remove or redirect the other. |
| 14 | Testing | No tests for page components or API routes | `app/(internal)/*`, `app/api/*` | ðŸŸ¡ Medium | Unit tests only cover UI primitives (`Sidebar`, `StatusBadge`, `Table`, etc.) and formatters. Zero tests for the 4 page components or the 8 API route handlers. Critical business logic (param parsing, error responses, data filtering) is untested. |
| 15 | Testing | No end-to-end (E2E) test setup | Project-wide | ðŸŸ¡ Medium | No Playwright or Cypress configuration exists. Full user flows (navigating between pages, viewing data, handling errors) are only verified manually. |
| 16 | Performance | No `<Suspense>` boundaries for streaming | Dashboard, list pages | ðŸŸ¡ Medium | All data pages are client components using manual `isLoading`/`isError` checks. Consider using React Server Components with `<Suspense>` for streaming HTML, which improves TTFB and perceived performance. |
| 17 | UX | No retry mechanism on data fetch errors | `app/(internal)/dashboard/page.tsx:37-43`, all table pages | ðŸŸ¡ Medium | When data loading fails, users see a static error message like "Failed to load KPI data." with no "Retry" button. They must manually refresh the entire page. Add a retry button that calls `refetch()`. |
| 18 | Performance | `refetchOnWindowFocus: false` globally | `app/providers.tsx:16` | ðŸŸ¡ Medium | Disabling refetch-on-focus means stale data persists when users switch back to the tab. For a shop management tool with real-time KPIs, this can show outdated data. Consider enabling this or using a shorter `staleTime`. |
| 19 | Code Quality | BrandMark has redundant default props vs `cn()` | `components/branding/BrandMark.tsx:13-14,16,21` | ðŸŸ¢ Low | The `className` and `textClassName` props have default values that are also hardcoded inside `cn()`. The defaults are always overridden by the same hardcoded values, making the default parameters misleading. Remove the duplicated values from `cn()` or from the defaults. |
| 20 | Accessibility | Color contrast not verified | `globals.css`, component styles | ðŸŸ¢ Low | Muted text (`--muted: #5f6875`) on the light background (`--background: #f7f8fa`) may not meet WCAG AA contrast ratio (4.5:1). Slate-500 text on slate-800 backgrounds in the sidebar may also fail. Run a contrast audit. |
| 21 | Hydration | `new Date().getFullYear()` in client component | `components/Sidebar.tsx:69` | ðŸŸ¢ Low | The footer renders the current year using `new Date()`. If the server renders at 11:59 PM Dec 31 and the client hydrates at 12:00 AM Jan 1, a hydration mismatch occurs. Minor risk but avoidable by computing once on the server. |
| 22 | DevOps | No health check in Dockerfile beyond Node startup | `Dockerfile` | ðŸŸ¢ Low | The Dockerfile doesn't include a `HEALTHCHECK` instruction. Container orchestrators (Docker Compose, ECS, K8s) benefit from a health check hitting `/api/v1/health`. |
| 23 | Code Quality | `pnpm-workspace.yaml` present but unnecessary | `pnpm-workspace.yaml` | ðŸŸ¢ Low | This is a single-package project. The workspace config adds no value and may confuse contributors into thinking this is a monorepo. |
| 24 | DX | No `lint` or `tsc` in pre-commit hooks | `package.json:58-65` | ðŸŸ¢ Low | `lint-staged` runs `prettier --write` and `eslint --fix` but doesn't run `tsc`. Type errors can be committed and only caught in CI. Consider adding type checking to the pre-commit pipeline. |

## Severity Distribution

| Severity | Count |
|----------|-------|
| ðŸ”´ Critical | 3 |
| ðŸŸ  High | 5 |
| ðŸŸ¡ Medium | 9 |
| ðŸŸ¢ Low | 7 |
| **Total** | **24** |

## Recommended Priority Order

1. **Immediate** (ðŸ”´): Enable Strict Mode, add Error Boundaries, plan auth strategy
2. **Next Sprint** (ðŸŸ ): Fix misleading cursor-pointer, update metadata, add mobile sidebar, handle Zod parse errors, add pagination
3. **Backlog** (ðŸŸ¡): ARIA improvements, empty states, retry buttons, E2E tests, page/API route tests, dedup nav config
4. **Polish** (ðŸŸ¢): BrandMark cleanup, contrast audit, hydration fix, Dockerfile HEALTHCHECK, remove workspace file, add tsc to hooks
